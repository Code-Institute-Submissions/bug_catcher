{"changed":true,"filter":false,"title":"app.py","tooltip":"/app.py","value":"import os\nfrom flask import Flask, render_template, redirect, request, url_for\nfrom flask_pymongo import PyMongo\nfrom bson.objectid import ObjectId\n\n\n\napp = Flask(__name__)\napp.config[\"MONGO_DBNAME\"] = 'bug_catcher'\napp.config[\"MONGO_URI\"] = os.getenv('MONGO_URI', 'mongodb://localhost')\n\nmongo = PyMongo(app)\n\n@app.route('/')\n@app.route('/get_bugs')\ndef get_bugs():\n    return render_template('bugs.html', bugs=mongo.db.bugs.find({'completed':{ '$ne':'on'}}))\n    \n@app.route('/addbug')\ndef add_bug():\n    return render_template('addbugs.html', projects=mongo.db.project.find({'completed':{ '$ne':'on'}}))\n    \n@app.route('/addproject')\ndef add_project():\n    return render_template('new_project.html')\n    \n@app.route('/projects')\ndef get_projects():\n    return render_template('projects.html', projects=mongo.db.project.find({'completed':{ '$ne':'on'}}))\n    \n@app.route('/insertbug', methods=[\"POST\"])\ndef insertbug():\n    bugs=mongo.db.bugs\n    bugs.insert_one(request.form.to_dict())\n    return redirect(url_for('get_bugs'))\n    \n@app.route('/insertproject', methods=[\"POST\"])\ndef insertproject():\n    project=mongo.db.project\n    project.insert_one(request.form.to_dict())\n    return redirect(url_for('get_projects'))    \n    \n    \n@app.route('/edit_bug/<bug_id>')\ndef edit_bug(bug_id):\n    the_bug =  mongo.db.bugs.find_one({\"_id\": ObjectId(bug_id)})\n    projects =  mongo.db.project.find({'completed':{ '$ne':'on'}})\n    return render_template('editbug.html', bug=the_bug, projects=projects)\n    \n@app.route('/editproject/<project_id>')\ndef editproject(project_id):\n    project =  mongo.db.project.find_one({\"_id\": ObjectId(project_id)})\n    return render_template('editproject.html', project=project)\n    \n@app.route('/update_bug/<bug_id>', methods=[\"POST\"])\ndef update_bug(bug_id):\n    bugs = mongo.db.bugs\n    bugs.update( {'_id': ObjectId(bug_id)},\n    {\n    'project_name':request.form.get('name'),\n    'whats_wrong':request.form.get('whats_wrong'),\n    'how_to_repeat': request.form.get('how_to_repeat'),\n    'urgent':request.form.get('urgent'),\n    'reoccuring':request.form.get('reoccuring')\n    \n    })\n    \n    \n    return redirect(url_for('get_bugs')) \n\n@app.route('/delete_bug/<bug_id>')\ndef delete_bug(bug_id):\n    mongo.db.bugs.remove({\"_id\": ObjectId(bug_id)})\n    return redirect(url_for('get_bugs'))\n\n@app.route('/remove_bug/<bug_id>')\ndef remove_bug(bug_id):\n    mongo.db.bugs.remove({\"_id\": ObjectId(bug_id)})\n    return redirect(url_for('get_complete'))\n\n@app.route('/delete_project/<project_id>')\ndef delete_project(project_id):\n    mongo.db.project.remove({\"_id\": ObjectId(project_id)})\n    return redirect(url_for('get_projects'))\n\n\n@app.route('/update_project/<project_id>', methods=[\"POST\"]) \ndef update_project(project_id):\n    project = mongo.db.project\n    project.update({'_Id': ObjectId(project_id)},\n    {\n      'project_name':request.form.get('name'),\n      'description':request.form.get('description')\n    })\n    return redirect(url_for('get_projects'))\n    \n@app.route('/complete_bug/<bug_id>')\ndef complete_bug(bug_id):\n   the_bug =  mongo.db.bugs.find_one({\"_id\": ObjectId(bug_id)})\n   projects =  mongo.db.project.find()\n   return render_template('completebug.html', bug=the_bug, projects=projects)\n   \n@app.route('/migrate_bug/<bug_id>', methods=[\"POST\"])\ndef migrate_bug(bug_id):\n    bugs = mongo.db.bugs\n    bugs.update( {'_id': ObjectId(bug_id)},\n    {\n    'project_name':request.form.get('name'),\n    'whats_wrong':request.form.get('whats_wrong'),\n    'how_to_repeat': request.form.get('how_to_repeat'),\n    'urgent':request.form.get('urgent'),\n    'reoccuring':request.form.get('reoccuring'),\n    'fix':request.form.get('fix'),\n    'completed':request.form.get('completed')\n    })\n    return redirect(url_for('get_complete', bug=bugs))\n    \n@app.route('/complete_project/<project_id>')\ndef complete_project(project_id):\n   projects =  mongo.db.project.find_one({\"_id\": ObjectId(project_id)})\n   return render_template('completedproject.html', project=projects)\n\n@app.route('/get_complete')\ndef get_complete():\n    return render_template('completedlist.html', bugs=mongo.db.bugs.find({'completed':'on'}))\n\n@app.route('/end_project/<project_id>', methods=[\"POST\"])\ndef end_project(project_id):\n    project = mongo.db.project\n    project.update( {'_id': ObjectId(project_id)},\n    {\n   'name':request.form.get('name'),     \n   'description':request.form.get('description'),\n   'com_date':request.form.get('com_date'),\n   'completed':request.form.get('completed'),\n   'com_date_actual':request.form.get('com_date_actual'),\n   'delay-reason':request.form.get('delay')\n    })\n    return redirect(url_for('get_projects', projects=project))    \n\n   \nif __name__ == '__main__':\n    app.run(host=os.environ.get('IP'),\n    port=int(os.environ.get('PORT')),\n    debug=True)","undoManager":{"mark":31,"position":31,"stack":[[{"start":{"row":20,"column":74},"end":{"row":20,"column":100},"action":"insert","lines":["{'completed':{ '$ne':'on'}"],"id":2}],[{"start":{"row":20,"column":100},"end":{"row":20,"column":101},"action":"insert","lines":["}"],"id":3}],[{"start":{"row":46,"column":38},"end":{"row":46,"column":64},"action":"insert","lines":["{'completed':{ '$ne':'on'}"],"id":4}],[{"start":{"row":46,"column":64},"end":{"row":46,"column":65},"action":"insert","lines":["}"],"id":5}],[{"start":{"row":136,"column":57},"end":{"row":137,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":136,"column":57},"end":{"row":136,"column":58},"action":"remove","lines":[" "],"id":7}],[{"start":{"row":136,"column":57},"end":{"row":136,"column":60},"action":"remove","lines":["   "],"id":8},{"start":{"row":136,"column":57},"end":{"row":137,"column":0},"action":"insert","lines":["",""]},{"start":{"row":137,"column":0},"end":{"row":137,"column":3},"action":"insert","lines":["   "]}],[{"start":{"row":89,"column":18},"end":{"row":89,"column":19},"action":"insert","lines":["_"],"id":9},{"start":{"row":89,"column":19},"end":{"row":89,"column":20},"action":"insert","lines":["o"]},{"start":{"row":89,"column":20},"end":{"row":89,"column":21},"action":"insert","lines":["n"]},{"start":{"row":89,"column":21},"end":{"row":89,"column":22},"action":"insert","lines":["r"]}],[{"start":{"row":89,"column":21},"end":{"row":89,"column":22},"action":"remove","lines":["r"],"id":10}],[{"start":{"row":89,"column":21},"end":{"row":89,"column":22},"action":"insert","lines":["e"],"id":11}],[{"start":{"row":94,"column":6},"end":{"row":95,"column":0},"action":"insert","lines":["",""],"id":12},{"start":{"row":95,"column":0},"end":{"row":95,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":95,"column":4},"end":{"row":95,"column":5},"action":"insert","lines":["p"],"id":13},{"start":{"row":95,"column":5},"end":{"row":95,"column":6},"action":"insert","lines":["r"]},{"start":{"row":95,"column":6},"end":{"row":95,"column":7},"action":"insert","lines":["i"]},{"start":{"row":95,"column":7},"end":{"row":95,"column":8},"action":"insert","lines":["n"]},{"start":{"row":95,"column":8},"end":{"row":95,"column":9},"action":"insert","lines":["t"]}],[{"start":{"row":95,"column":9},"end":{"row":95,"column":11},"action":"insert","lines":["()"],"id":14}],[{"start":{"row":95,"column":10},"end":{"row":95,"column":11},"action":"insert","lines":["r"],"id":15},{"start":{"row":95,"column":11},"end":{"row":95,"column":12},"action":"insert","lines":["e"]},{"start":{"row":95,"column":12},"end":{"row":95,"column":13},"action":"insert","lines":["q"]},{"start":{"row":95,"column":13},"end":{"row":95,"column":14},"action":"insert","lines":["u"]},{"start":{"row":95,"column":14},"end":{"row":95,"column":15},"action":"insert","lines":["e"]},{"start":{"row":95,"column":15},"end":{"row":95,"column":16},"action":"insert","lines":["s"]},{"start":{"row":95,"column":16},"end":{"row":95,"column":17},"action":"insert","lines":["t"]},{"start":{"row":95,"column":17},"end":{"row":95,"column":18},"action":"insert","lines":["."]}],[{"start":{"row":95,"column":18},"end":{"row":95,"column":19},"action":"insert","lines":["f"],"id":16},{"start":{"row":95,"column":19},"end":{"row":95,"column":20},"action":"insert","lines":["o"]},{"start":{"row":95,"column":20},"end":{"row":95,"column":21},"action":"insert","lines":["r"]},{"start":{"row":95,"column":21},"end":{"row":95,"column":22},"action":"insert","lines":["m"]}],[{"start":{"row":89,"column":18},"end":{"row":89,"column":22},"action":"remove","lines":["_one"],"id":17}],[{"start":{"row":93,"column":25},"end":{"row":93,"column":29},"action":"remove","lines":["form"],"id":18},{"start":{"row":93,"column":25},"end":{"row":93,"column":26},"action":"insert","lines":["i"]},{"start":{"row":93,"column":26},"end":{"row":93,"column":27},"action":"insert","lines":["n"]},{"start":{"row":93,"column":27},"end":{"row":93,"column":28},"action":"insert","lines":["["]},{"start":{"row":93,"column":28},"end":{"row":93,"column":29},"action":"insert","lines":["p"]}],[{"start":{"row":93,"column":28},"end":{"row":93,"column":29},"action":"remove","lines":["p"],"id":19},{"start":{"row":93,"column":27},"end":{"row":93,"column":28},"action":"remove","lines":["["]}],[{"start":{"row":93,"column":27},"end":{"row":93,"column":28},"action":"insert","lines":["p"],"id":20},{"start":{"row":93,"column":28},"end":{"row":93,"column":29},"action":"insert","lines":["u"]},{"start":{"row":93,"column":29},"end":{"row":93,"column":30},"action":"insert","lines":["t"]}],[{"start":{"row":93,"column":17},"end":{"row":93,"column":24},"action":"remove","lines":["request"],"id":21}],[{"start":{"row":93,"column":17},"end":{"row":93,"column":18},"action":"remove","lines":["."],"id":22}],[{"start":{"row":93,"column":17},"end":{"row":93,"column":25},"action":"remove","lines":["input.ge"],"id":23},{"start":{"row":93,"column":17},"end":{"row":93,"column":18},"action":"remove","lines":["t"]}],[{"start":{"row":93,"column":17},"end":{"row":93,"column":18},"action":"insert","lines":["r"],"id":24},{"start":{"row":93,"column":18},"end":{"row":93,"column":19},"action":"insert","lines":["e"]},{"start":{"row":93,"column":19},"end":{"row":93,"column":20},"action":"insert","lines":["q"]},{"start":{"row":93,"column":20},"end":{"row":93,"column":21},"action":"insert","lines":["u"]},{"start":{"row":93,"column":21},"end":{"row":93,"column":22},"action":"insert","lines":["e"]},{"start":{"row":93,"column":22},"end":{"row":93,"column":23},"action":"insert","lines":["s"]},{"start":{"row":93,"column":23},"end":{"row":93,"column":24},"action":"insert","lines":["t"]}],[{"start":{"row":93,"column":24},"end":{"row":93,"column":25},"action":"insert","lines":["."],"id":25},{"start":{"row":93,"column":25},"end":{"row":93,"column":26},"action":"insert","lines":["f"]},{"start":{"row":93,"column":26},"end":{"row":93,"column":27},"action":"insert","lines":["o"]},{"start":{"row":93,"column":27},"end":{"row":93,"column":28},"action":"insert","lines":["r"]},{"start":{"row":93,"column":28},"end":{"row":93,"column":29},"action":"insert","lines":["m"]},{"start":{"row":93,"column":29},"end":{"row":93,"column":30},"action":"insert","lines":["."]}],[{"start":{"row":93,"column":30},"end":{"row":93,"column":31},"action":"insert","lines":["g"],"id":26},{"start":{"row":93,"column":31},"end":{"row":93,"column":32},"action":"insert","lines":["e"]},{"start":{"row":93,"column":32},"end":{"row":93,"column":33},"action":"insert","lines":["t"]}],[{"start":{"row":92,"column":51},"end":{"row":94,"column":4},"action":"remove","lines":[",","      'com_date':request.form.get('com_date')","    "],"id":41}],[{"start":{"row":92,"column":51},"end":{"row":94,"column":4},"action":"insert","lines":["","        ","    "],"id":42}],[{"start":{"row":93,"column":0},"end":{"row":94,"column":4},"action":"remove","lines":["        ","    "],"id":43}],[{"start":{"row":93,"column":0},"end":{"row":93,"column":4},"action":"insert","lines":["    "],"id":44}],[{"start":{"row":93,"column":6},"end":{"row":95,"column":4},"action":"remove","lines":["","    print(request.form)","    "],"id":45},{"start":{"row":93,"column":6},"end":{"row":94,"column":0},"action":"insert","lines":["",""]},{"start":{"row":94,"column":0},"end":{"row":94,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":94,"column":4},"end":{"row":94,"column":5},"action":"remove","lines":["r"],"id":46}],[{"start":{"row":94,"column":4},"end":{"row":94,"column":5},"action":"insert","lines":["r"],"id":47}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":34},"action":"remove","lines":["from bson.objectid import ObjectId"],"id":48}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":0},"end":{"row":3,"column":34},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1592508909161}